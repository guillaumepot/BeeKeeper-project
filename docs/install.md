# Install
---


The following chapter explain how to install each different app node.





## Table of Contents

- [Services initialization](#services-initialization)
- [Start and Stop](#start-and-stop)
- [Recommended default configuration changes](#recommended-default-configuration-changes)
    - [Common env](#common-env)
    - [Beegis](#beegis)
    - [Airflow](#airflow)
    - [Mlflow](#mlflow)
    - [API](#api)
    - [Postgres](#postgres)
    - [MongoDB](#mongodb)
    - [Secrets](#secrets)




## Services initialization

- Execute the script ./utils/init_services.sh to intiialize default configuration for each service.
    - The script will generate a common.env file and .env file for the following services:
        - api
        - postgres
        - mongodb
        - airflow
        - mlflow
        - beegis (ui)




## Start and Stop

In ./utils/ direcotry, you can use the start_containers.sh & stop_containers.sh scripts to start & stop the services once the defualt initialization has been done.

    - ./start_containers.sh   is used to start the services dpeending your choice when the sciprt is launched.
    - ./stop_containers.sh    stop all service containers.




## Recommended default configuration changes

### Common env

Common.env file provide generic variables to start services trough docker-compose.yml.

The first part ("Services setup information") is automatically set to true when init_services.sh has been started. start_containers.sh will check if all services are initialized before starting containers.


It is recommended to check and validate some vars like :
    - data filepaths
    - logs filepaths
    - sources filepath (if changes are done on the project architecture)
    - secrets filepaths (deault secrdts are stores in ./utils, make sure you secured the secrets directory to avoid password leak)



### Beegis

The .env file provide generic variables used for beegis UI container.

Change the API host route (Host + Port) and the use the UI should use to login and use restrcited API routes.

Default user generated by the start_containers.sh script is called "jagjag".
Do not forget to change the defualt password in the secrets.



### Airflow

The .env file provide generic variables used for Airflow container.

Airflow init service will be rerun whenstar_containers.sh is used, allowing to change the default admi nAiflow webserver user credentials.


Airflow contains critical configurations that should not be changed without knowing what you're doing.

Some other vars can be configured such as : 
    - Airflow DAGs schedulers
    - Tasks misc configurations



### Mlflow

The .env file provide generic variables used for Mlflow webserver container.

Default configuration route the webserver on port 8002 (localhost)



### API

The .env file provide generic variables used for the API container.

    - Set DEBUG to False in production
    - Define route limiters depending your needs.
    - Make sure Database connections are well configured depending how you set your database services.




### Postgres

The .env file provide generic variables used for the Postgres container.

    - Define default database
    - Define ROOT username (change this in production)



### MongoDB

The .env file provide generic variables used for the MongoDB container.

    - Define default database
    - Define ROOT username (change this in production)



### Secrets

By default, secrets are stores in ./utils/secrets

Secrets contain passwords for root users in the different services. It is storngly advised to change default passwords (and username in .env files) to avoid unsecured data.

