# BeeKeeper-project


## Disclaimer
This project is a fork from a profesional MVP project destinated to INRAE "Institut de l'abeille".
All confidential datas & UI are removed | UI source is currently not shared and owned by the client.



<img src="./media/imgs/project_img.jpeg" alt="BeeM Project Logo" width="250" height="250" align="right">


---

## Project Information

- **Version**: 1.0.0
- **Development Stage**: 
- *The project development is not longer supported here and has been delivered to the project owner.*
Source: https://appli.itsap.asso.fr/app/01-beegis

More informations about this project here: (French language)  [Project description](./PROJECT_DESCRIPTION.md).


---

## Authors & Contributors

- **Alexandre Dangléant**  
  *Role*: Author

  [![LinkedIn Badge](https://img.shields.io/badge/LinkedIn-0077B5?style=for-the-badge&logo=linkedin&logoColor=white)](https://www.linkedin.com/in/alexandre-dangl%C3%A9ant-062014148/)

- **Julien Landouar**  
  *Role*: Author  
  [![LinkedIn Badge](https://img.shields.io/badge/LinkedIn-0077B5?style=for-the-badge&logo=linkedin&logoColor=white)](https://www.linkedin.com/in/julien-landouar/)  
  [![Github Badge](https://img.shields.io/badge/GitHub%20Pages-222222?style=for-the-badge&logo=GitHub%20Pages&logoColor=white)](https://github.com/dixse-pt)

- **Guillaume Pot**  
  *Role*: Author  
  [![LinkedIn Badge](https://img.shields.io/badge/LinkedIn-0077B5?style=for-the-badge&logo=linkedin&logoColor=white)](https://www.linkedin.com/in/062guillaumepot/)  
  [![Github Badge](https://img.shields.io/badge/GitHub%20Pages-222222?style=for-the-badge&logo=GitHub%20Pages&logoColor=white)](https://github.com/guillaumepot)

---

## Table of Contents

- [Project Architecture](#project-architecture)
- [Installation](#installation)
- [Changelogs](#changelogs)
- [Repository](#repository)
  - [Architecture](#architecture)
  - [Branch Policy](#branch-policy)
  - [Versions](#versions)
  - [Code Guidelines](#code-guidelines)
  - [Contribute](#contribute)
- [Modules](#modules)
- [Miscellaneous](#miscellaneous)
  - [Data Sources](#data-sources)


---

## Project Architecture

<img src="./media/imgs/architecture_schema.svg" alt="BeeM Project Logo" width="800" height="800" align="center">



---

## Installation

To get started with the project, follow the instructions in the [installation guide](./docs/install.md).

---

## Changelogs

See the latest updates in our changelog:
- [1.0](./docs/changelogs/1.0.0.md) - Version-1.0.0

---

## Repository

### Architecture

The repository is organized as follows:

```
|
├── archives                    # Old files used during development sprints, kept as archives.
|
|
├── data                        # Default directory configuration to store data, contains databases data, mlflow data, and ETL pipeline directories.
|     |
|     ├── archives              # Raw processed files from providers (scale data) are stored here to keep an archive of raw files.
|     |
|     ├── cleaned               # Cleaned processed files from ETL & segmentation dags are stored here.
|     |   
|     ├── databases             # Default directory path to store databased data.
|     |       |
|     |       ├── airflow_data         # Will be generated by the install_services.sh script if the admin doesn't change the default value.
|     |       |
|     |       ├── mongodb_data         # Will be generated by the install_services.sh script if the admin doesn't change the default value.
|     |       |
|     |       └── postgres_data        # Will be generated by the install_services.sh script if the admin doesn't change the default value.
|     |
|     ├── mlflow_data           # Default mlflow data directory to store runs, artifacts, ...
|     |
|     ├── processing            # Temp directory for Airlfow Dags to store processing data.
|     |
|     └── raw                   # Raw files to process are stored here when provided or scraped depending the data to process.
|
|
├── docs                        # Contains documents such as text used for dev purpose or repository structure.
|     |
|     └── changelogs            # Contains changelogs file related to different versions or development stages.
|
|
├── gitlab_jobs                 # Our CI pipeline jobs are stored here and included in .gitlab-ci.yml
|      |
|      ├── build_image.yml      # Jobs to build docker images on gitlab registry (Triggers on main)
|      |
|      ├── deploy.yml           # Jobs to deploy services (Triggers on main branch)
|      |
|      └── unit_tests.yml       # Jobs to start unit tests (Triggers on build-x.x.x branches)
|
|
├── logs                        # Default logs directory for the services if the defualt configuration isn't changed.
|
|
|
├── logs                        # Default logs directory for the services if the defualt configuration isn't changed.
|
├── media                       # General purpose directory containing medias like imgs, videos, schemas, ...
|
|
├── src                         # Contains source files for app | modules
|    |
|    ├── airflow                    # Airflow sources
|    |
|    ├── alertmanager               # Alertmanager sources
|    |
|    ├── api                        # API sources
|    |
|    ├── beegis                     # "beegis" UI sources
|    |
|    ├── grafana                    # Grafana sources
|    |
|    ├── mlflow                     # Mlflow sources
|    |
|    ├── mongodb                    # Mongodb sources
|    |
|    ├── postgres                   # Postgres sources
|    |
|    ├── postgres-exporter          # Postgres Exporter sources
|    |
|    ├── prometheus                 # Prometheus sources
|    |
|    ├── redis                      # Redis sources
|    |
|    └── statsd                     # StatsD sources
|
|
├── utils                       # Contains scripts, files used by our project (ex: install_services.sh, docker-compose.yml, ...)
|     |
|     ├── scripts_functions       # Contains shell functions used by scripts (espacially init_services.sh)
|     |
|     ├── secrets                 # Default secrets storage, make sure to change the default values and change the permissions
|     |
|     ├── docker-compose.yml      # General compose file, contains all services
|     |
|     ├── init_services.sh        # Initialize services and generate default .env configurations (flush the services if default configuration is already made)
|     |
|     ├── start_containers.sh     # Start services depending the choices given when starting the script.
|     |
|     └── stop_containers.sh      # Stop all services
|
├── .gitignore                  # .gitignore file to avoid uploading caches, credentials, ..
|
├── .gitlab-ci.yml              # Gitlab CI configuration file
|
├── LICENSE
|
└── README.md
```

### Branch Policy

We follow a clear branching model for development:

- **main**: The main branch containing stable releases.
- **build**: For building releases from development branches.
- **debug**: For debugging, branched from build.
- **dev**: Where new features are developed.

Branch naming convention:

- `dev-<version>-<stack>` for feature branches.
- `debug-<version>-<issue_number>` for debug branches.

Example:  
If version `1.1.0` is the latest release, then the build branch would be `build-1.1.0` and feature branches might include `dev-1.1.0-API`, `dev-1.1.0-AIRFLOW`, etc.

Bug fixes create a `debug-1.1.z-<issue_number>` branch, leading to a new build and eventually an update on `main`.

_Note_: Bug fixes increment the `z` in the versioning (x.y.z).

### Versions

Our versioning follows a `x.y.z` pattern:

- **x**: Major changes or UI overhauls.
- **y**: New significant features (e.g., new API routes).
- **z**: Bug fixes or minor updates.

Examples:

- `1.0.0` - Initial release
- `1.1.0` - Feature update.
- `1.1.1` - Minor update
---

### Code Guidelines

For more information on coding standards and best practices, please refer to our internal documentation.

- [Code Guidelines](./docs/guidelines.md)

---

### Roadmap


API update
- Add routes to the API
  - New cartographic routes
- Add Redis path through data routes (store in Redis to lower the charge requests on databases)


Beegis update
- UI code refactorization
- Meteo archives no available (request from API)

Docker compose
- Deploy clause optimization for each container




---

### Contribute

Currently, we are not accepting external contributions.  
For updates and news, please check our Notion page:  
_[Notion Page currently Private]_

---

## Modules

The project adopts a microservices architecture, allowing each module to be deployed independently across different servers. Below is a list of modules:

- [API](./docs/api.md)
- [PostgresSQL](./docs/postgres.md)
- [MongoDB](./docs/mongodb.md)
- [Redis](./docs/redis.md)
- [Airflow](./docs/airflow.md)
- [MlFlow](./docs/mlflow.md)
- [Monitoring](./docs/monitoring.md)

---

## Miscellaneous

### Data Sources

- Icons & Badge sources:
[Badges](https://github.com/alexandresanlim/Badges4-README.md-Profile)
[Dev icon](https://github.com/devicons/devicon)

- Open Meteo api:
[OpenMeteoAPI](https://open-meteo.com/en/terms)

Non commercial use: Less than 10'000 API calls per day, 5'000 per hour and 600 per minute.


### Known issues

- Redis container loop restarting
  -> Make sure src/redis/modules/librejson.so has execution permission (chmod +x)

- Airflow ML Dag issue (object not serializable)
  -> Edit airlfow.cfg : enable_xcom_pickling = True

